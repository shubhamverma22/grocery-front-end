{"ast":null,"code":"var _jsxFileName = \"/Users/shubhamverma/Documents/grocery-store/projfrontend/src/user/Signin.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport Base from \"../core/Base\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { authenticate, isAuthenticate, signin } from \"../auth/helper\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Signin() {\n  _s();\n\n  const [values, setValues] = useState({\n    email: \"\",\n    password: \"\",\n    error: \"\",\n    loading: false,\n    didRedirect: false\n  });\n  const {\n    email,\n    password,\n    error,\n    loading,\n    didRedirect\n  } = values;\n  const {\n    user\n  } = isAuthenticate;\n\n  const handleChange = name => event => {\n    setValues({ ...values,\n      error: false,\n      [name]: event.target.value\n    });\n  };\n\n  const onSubmit = event => {\n    event.preventDefault();\n    setValues({ ...values,\n      error: false,\n      loading: true\n    });\n    signin({\n      email,\n      password\n    }).then(data => {\n      if (data.error) {\n        setValues({ ...values,\n          error: data.error,\n          loading: false\n        });\n      } else {\n        authenticate(data, () => {\n          setValues({ ...values,\n            didRedirect: true\n          });\n        });\n      }\n    }).catch(console.log(\"Sign in Request Failed\"));\n  };\n\n  const performRedirect = () => {\n    if (didRedirect) {\n      if (user && user.role === 1) {\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Redirect to Admin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 12\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Redirect to user dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 12\n        }, this);\n      }\n    }\n\n    if (isAuthenticate()) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this);\n    }\n  };\n\n  const loadingMessage = () => {\n    return loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-info\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }, this);\n  };\n\n  const errorMessage = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-6 offset-sm-3 text-left\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert alert-Danger\",\n          style: {\n            display: error ? \"\" : \"none\"\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 4\n    }, this);\n  };\n\n  const signInForm = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-6 offset-sm-3 text-left\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-light\",\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              onChange: handleChange(\"email\"),\n              value: email,\n              className: \"form-control\",\n              type: \"text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-light\",\n              children: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              onChange: handleChange(\"password\"),\n              value: password,\n              className: \"form-control\",\n              type: \"text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"d-grid gap-2 col-6 mx-auto py-4\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: onSubmit,\n              class: \"btn btn-success\",\n              type: \"button\",\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 4\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Base, {\n      title: \"Sign In\",\n      description: \"User can Sign in from here\",\n      children: [loadingMessage(), errorMessage(), signInForm(), \"performRedirect()}\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 3\n  }, this);\n}\n\n_s(Signin, \"39jo0r/0sFPgPrUfxHDZYGIYcQQ=\");\n\n_c = Signin;\nexport default Signin;\n\nvar _c;\n\n$RefreshReg$(_c, \"Signin\");","map":{"version":3,"sources":["/Users/shubhamverma/Documents/grocery-store/projfrontend/src/user/Signin.js"],"names":["React","useState","Base","Link","Redirect","authenticate","isAuthenticate","signin","Signin","values","setValues","email","password","error","loading","didRedirect","user","handleChange","name","event","target","value","onSubmit","preventDefault","then","data","catch","console","log","performRedirect","role","loadingMessage","errorMessage","display","signInForm"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Base from \"../core/Base\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { authenticate, isAuthenticate, signin } from \"../auth/helper\";\n\nfunction Signin() {\n\tconst [values, setValues] = useState({\n\t\temail: \"\",\n\t\tpassword: \"\",\n\t\terror: \"\",\n\t\tloading: false,\n\t\tdidRedirect: false,\n\t});\n\n\tconst { email, password, error, loading, didRedirect } = values;\n\tconst { user } = isAuthenticate;\n\n\tconst handleChange = (name) => (event) => {\n\t\tsetValues({ ...values, error: false, [name]: event.target.value });\n\t};\n\n\tconst onSubmit = (event) => {\n\t\tevent.preventDefault();\n\t\tsetValues({ ...values, error: false, loading: true });\n\t\tsignin({ email, password })\n\t\t\t.then((data) => {\n\t\t\t\tif (data.error) {\n\t\t\t\t\tsetValues({ ...values, error: data.error, loading: false });\n\t\t\t\t} else {\n\t\t\t\t\tauthenticate(data, () => {\n\t\t\t\t\t\tsetValues({\n\t\t\t\t\t\t\t...values,\n\t\t\t\t\t\t\tdidRedirect: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(console.log(\"Sign in Request Failed\"));\n\t};\n\n\tconst performRedirect = () => {\n\t\tif (didRedirect) {\n\t\t\tif (user && user.role === 1) {\n\t\t\t\treturn <p>Redirect to Admin</p>;\n\t\t\t} else {\n\t\t\t\treturn <p>Redirect to user dashboard</p>;\n\t\t\t}\n\t\t}\n\t\tif (isAuthenticate()) {\n\t\t\treturn <Redirect to=\"/\" />;\n\t\t}\n\t};\n\tconst loadingMessage = () => {\n\t\treturn (\n\t\t\tloading && (\n\t\t\t\t<div className=\"alert alert-info\">\n\t\t\t\t\t<h2>Loading...</h2>\n\t\t\t\t</div>\n\t\t\t)\n\t\t);\n\t};\n\n\tconst errorMessage = () => {\n\t\treturn (\n\t\t\t<div className=\"row\">\n\t\t\t\t<div className=\"col-md-6 offset-sm-3 text-left\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"alert alert-Danger\"\n\t\t\t\t\t\tstyle={{ display: error ? \"\" : \"none\" }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{error}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst signInForm = () => {\n\t\treturn (\n\t\t\t<div className=\"row\">\n\t\t\t\t<div className=\"col-md-6 offset-sm-3 text-left\">\n\t\t\t\t\t<form>\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<label className=\"text-light\">Email</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tonChange={handleChange(\"email\")}\n\t\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<label className=\"text-light\">Password</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tonChange={handleChange(\"password\")}\n\t\t\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"d-grid gap-2 col-6 mx-auto py-4\">\n\t\t\t\t\t\t\t<button onClick={onSubmit} class=\"btn btn-success\" type=\"button\">\n\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\treturn (\n\t\t<div>\n\t\t\t<Base title=\"Sign In\" description=\"User can Sign in from here\">\n\t\t\t\t{loadingMessage()}\n\t\t\t\t{errorMessage()}\n\t\t\t\t{signInForm()}\n        performRedirect()}\n\t\t\t</Base>\n\t\t</div>\n\t);\n}\n\nexport default Signin;\n"]},"metadata":{},"sourceType":"module"}